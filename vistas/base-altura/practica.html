<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Pr치ctica - Base y Altura</title>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Fuentes de Google -->
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap"
      rel="stylesheet"
    />

    <!-- Estilos personalizados -->
    <link rel="stylesheet" href="../../styles.css" />
    <link rel="stylesheet" href="../../core/animations.css" />

    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              primary: "#2196F3",
              accent: "#8BC34A",
            },
            fontFamily: {
              sans: ["Inter", "system-ui", "sans-serif"],
            },
          },
        },
        darkMode: "class",
      };
    </script>
  </head>

  <body
    class="bg-gray-50 dark:bg-gray-900 min-h-screen transition-colors duration-300"
  >
    <!-- Header -->
    <header
      class="bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700"
    >
      <div class="max-w-7xl mx-auto px-6 py-4">
        <div class="flex items-center justify-between">
          <!-- Logo y T칤tulo -->
          <div class="flex items-center gap-3">
            <div
              class="w-10 h-10 bg-gradient-to-br from-blue-400 to-blue-600 rounded-lg flex items-center justify-center text-2xl"
            >
              游늻
            </div>
            <div>
              <h1 class="text-xl font-bold text-gray-900 dark:text-white">
                Base y Altura
              </h1>
              <p class="text-sm text-gray-600 dark:text-gray-400">
                Figuras Planas
              </p>
            </div>
          </div>

          <!-- Botones de acci칩n -->
          <div class="flex items-center gap-3">
            <a
              href="../../index.html"
              class="px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors flex items-center gap-2"
            >
              <svg
                class="w-5 h-5"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M10 19l-7-7m0 0l7-7m-7 7h18"
                />
              </svg>
              Volver
            </a>

            <!-- Bot칩n de modo oscuro -->
            <button
              id="darkModeToggle"
              class="p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors"
            >
              <svg
                class="w-6 h-6 text-gray-700 dark:text-gray-300 hidden dark:block"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"
                />
              </svg>
              <svg
                class="w-6 h-6 text-gray-700 dark:text-gray-300 block dark:hidden"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"
                />
              </svg>
            </button>
          </div>
        </div>
      </div>
    </header>

    <!-- Tabs de navegaci칩n -->
    <div
      class="bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 transition-colors duration-300"
    >
      <div class="max-w-7xl mx-auto px-6">
        <div class="flex gap-8">
          <a
            href="base-altura.html"
            class="py-4 px-2 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200 font-medium flex items-center gap-2"
          >
            <svg
              class="w-5 h-5"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"
              />
            </svg>
            Aprender
          </a>
          <!-- Pesta침a de Pr치ctica activa -->
          <a
            href="practica.html"
            class="py-4 px-2 border-b-2 border-blue-500 text-blue-600 dark:text-blue-400 font-medium flex items-center gap-2"
          >
            <svg
              class="w-5 h-5"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"
              />
            </svg>
            Practicar
          </a>
          <a
            href="evaluacion.html"
            class="py-4 px-2 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200 font-medium flex items-center gap-2"
          >
            <svg
              class="w-5 h-5"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"
              />
            </svg>
            Evaluar
          </a>
        </div>
      </div>
    </div>

    <!-- TAREA 3: Contenido de Pr치ctica -->
    <main class="max-w-7xl mx-auto px-6 py-8">
      <h2
        class="text-3xl font-bold text-gray-900 dark:text-white mb-6 flex items-center gap-2"
      >
        <span>九勇</span>
        Ejercicios de Pr치ctica
      </h2>
      <p class="text-gray-700 dark:text-gray-300 text-lg mb-8">
        춰Es hora de poner a prueba lo que aprendiste! Estos ejercicios no tienen
        calificaci칩n, son solo para ti.
      </p>

      <div class="space-y-8">
        <!-- Ejercicio 1 (Desde refactored.js) -->
        <div
          class="bg-white dark:bg-gray-800 rounded-2xl p-6 border border-gray-200 dark:border-gray-700"
        >
          <h3 class="text-xl font-bold text-gray-900 dark:text-white mb-4">
            Ejercicio 1: Identifica la Base y la Altura
          </h3>
          <div class="grid md:grid-cols-2 gap-6 items-center">
            <div>
              <p class="text-gray-600 dark:text-gray-400 mb-4">
                Observa el tri치ngulo. La l칤nea roja es la base y la l칤nea azul
                punteada es la altura.
              </p>
              <svg class="w-full" height="200" viewBox="0 0 300 200">
                <polygon
                  points="50,150 250,150 150,50"
                  fill="rgba(236, 153, 75, 0.3)"
                  stroke="#EC994B"
                  stroke-width="3"
                />
                <!-- Base -->
                <line
                  x1="50"
                  y1="150"
                  x2="250"
                  y2="150"
                  stroke="#ef4444"
                  stroke-width="4"
                />
                <text
                  x="150"
                  y="170"
                  text-anchor="middle"
                  fill="#ef4444"
                  font-size="14"
                  font-weight="bold"
                >
                  Base: <tspan id="ex1-base-value">12</tspan> cm
                </text>
                <!-- Altura -->
                <line
                  x1="150"
                  y1="50"
                  x2="150"
                  y2="150"
                  stroke="#3b82f6"
                  stroke-width="4"
                  stroke-dasharray="5,5"
                />
                <text
                  x="175"
                  y="100"
                  text-anchor="middle"
                  fill="#3b82f6"
                  font-size="14"
                  font-weight="bold"
                >
                  Altura: <tspan id="ex1-altura-value">8</tspan> cm
                </text>
              </svg>
            </div>
            <div class="space-y-4">
              <div>
                <label
                  for="exercise1Base"
                  class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"
                  >Base (cm):</label
                >
                <input
                  type="number"
                  id="exercise1Base"
                  class="w-full p-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white"
                  placeholder="쮺u치l es la medida de la base?"
                />
              </div>
              <div>
                <label
                  for="exercise1Height"
                  class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"
                  >Altura (cm):</label
                >
                <input
                  type="number"
                  id="exercise1Height"
                  class="w-full p-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white"
                  placeholder="쮺u치l es la medida de la altura?"
                />
              </div>
              <button
                id="checkExercise1"
                class="w-full px-6 py-3 bg-blue-500 hover:bg-blue-600 text-white rounded-lg font-semibold transition-colors"
              >
                Comprobar Ejercicio 1
              </button>
              <div id="result1" class="mt-4 text-center"></div>
            </div>
          </div>
        </div>

        <!-- Ejercicio 2 (Desde refactored.js) -->
        <div
          class="bg-white dark:bg-gray-800 rounded-2xl p-6 border border-gray-200 dark:border-gray-700"
        >
          <h3 class="text-xl font-bold text-gray-900 dark:text-white mb-4">
            Ejercicio 2: Calcula el 츼rea del Rect치ngulo
          </h3>
          <div class="grid md:grid-cols-2 gap-6 items-center">
            <div>
              <p class="text-gray-600 dark:text-gray-400 mb-4">
                Usa la f칩rmula: 츼rea = Base 칑 Altura.
              </p>
              <svg class="w-full" height="150" viewBox="0 0 300 150">
                <rect
                  x="50"
                  y="25"
                  width="200"
                  height="100"
                  fill="rgba(139, 92, 246, 0.3)"
                  stroke="#8B5CF6"
                  stroke-width="3"
                />
                <!-- Base -->
                <line
                  x1="50"
                  y1="125"
                  x2="250"
                  y2="125"
                  stroke="#ef4444"
                  stroke-width="4"
                />
                <text
                  x="150"
                  y="145"
                  text-anchor="middle"
                  fill="#ef4444"
                  font-size="14"
                  font-weight="bold"
                >
                  Base: <tspan id="ex2-base-value">6</tspan> cm
                </text>
                <!-- Altura -->
                <line
                  x1="250"
                  y1="25"
                  x2="250"
                  y2="125"
                  stroke="#3b82f6"
                  stroke-width="4"
                  stroke-dasharray="5,5"
                />
                <text
                  x="275"
                  y="75"
                  text-anchor="middle"
                  fill="#3b82f6"
                  font-size="14"
                  font-weight="bold"
                >
                  Altura: <tspan id="ex2-altura-value">4</tspan> cm
                </text>
              </svg>
            </div>
            <div class="space-y-4">
              <div>
                <label
                  for="exercise2Area"
                  class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"
                  >츼rea (cm):</label
                >
                <input
                  type="number"
                  id="exercise2Area"
                  class="w-full p-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white"
                  placeholder="Calcula el 치rea del rect치ngulo"
                />
              </div>
              <button
                id="checkExercise2"
                class="w-full px-6 py-3 bg-blue-500 hover:bg-blue-600 text-white rounded-lg font-semibold transition-colors"
              >
                Comprobar Ejercicio 2
              </button>
              <div id="result2" class="mt-4 text-center"></div>
            </div>
          </div>
        </div>

        <!-- Ejercicio 3 (Desde refactored.js) -->
        <div
          class="bg-white dark:bg-gray-800 rounded-2xl p-6 border border-gray-200 dark:border-gray-700"
        >
          <h3 class="text-xl font-bold text-gray-900 dark:text-white mb-4">
            Ejercicio 3: Problema de la Vida Real
          </h3>
          <p id="ex3-problem-text" class="text-gray-600 dark:text-gray-400 mb-4">
            Mar칤a quiere pintar una pared rectangular en su cuarto. La pared
            mide 3 metros de base y 2.5 metros de altura. 쮺u치ntos metros
            cuadrados (m) de pared tiene que pintar?
          </p>
          <div class="space-y-4 max-w-md mx-auto">
            <div>
              <label
                for="exercise3Area"
                class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"
                >츼rea a pintar (m):</label
              >
              <input
                type="number"
                id="exercise3Area"
                class="w-full p-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white"
                placeholder="Calcula el 치rea de la pared"
              />
            </div>
            <button
              id="checkExercise3"
              class="w-full px-6 py-3 bg-blue-500 hover:bg-blue-600 text-white rounded-lg font-semibold transition-colors"
            >
              Comprobar Ejercicio 3
            </button>
            <div id="result3" class="mt-4 text-center"></div>
          </div>
        </div>
      </div>
    </main>
    
    <!-- 1. Modelos -->
    <script src="../../core/models/Topic.js"></script>
    <script src="../../core/models/Exercise.js"></script>
    <script src="../../core/models/Progress.js"></script>
    
    <!-- 2. Servicios -->
    <script src="../../core/services/StorageService.js"></script>
    <script src="../../core/services/NotificationService.js"></script>
    <script src="../../core/services/AnimationService.js"></script>
    
    <!-- 3. Controladores -->
    <script src="../../core/controllers/ExerciseController.js"></script>
    <script src="../../core/controllers/ProgressController.js"></script>
    
    <!-- 4. Clase Base -->
    <script src="../../core/BaseTopicModule.js"></script>
    
    <!-- 5. Script Espec칤fico de la P치gina (el de pr치ctica) -->
    <script src="base-altura-refactored.js?v=2"></script>

    <script>
      // === ALEATORIZACI칍N DE EJERCICIOS ===
      // Pool de ejercicios
      const ejerciciosPool = {
        ejercicio1: [
          { base: 12, altura: 8 },
          { base: 15, altura: 10 },
          { base: 18, altura: 12 },
          { base: 20, altura: 14 },
          { base: 16, altura: 9 },
          { base: 14, altura: 11 }
        ],
        ejercicio2: [
          { base: 6, altura: 4 },
          { base: 8, altura: 5 },
          { base: 10, altura: 7 },
          { base: 12, altura: 6 },
          { base: 9, altura: 5 },
          { base: 7, altura: 8 }
        ],
        ejercicio3: [
          { 
            texto: "Mar칤a quiere pintar una pared rectangular. La pared mide 3 metros de base y 2.5 metros de altura. 쮺u치ntos metros cuadrados debe pintar?",
            base: 3,
            altura: 2.5,
            esTriangulo: false
          },
          { 
            texto: "Juan tiene un jard칤n triangular con una base de 8 metros y una altura de 6 metros. 쮺u치l es el 치rea del jard칤n? (Recuerda: 츼rea = Base 칑 Altura 칭 2)",
            base: 8,
            altura: 6,
            esTriangulo: true
          },
          { 
            texto: "Una ventana rectangular mide 1.5 metros de base y 2 metros de altura. 쮺u치l es su 치rea?",
            base: 1.5,
            altura: 2,
            esTriangulo: false
          },
          { 
            texto: "Un cartel triangular tiene una base de 10 metros y una altura de 8 metros. 쮺u치ntos metros cuadrados de material se necesitan? (츼rea = Base 칑 Altura 칭 2)",
            base: 10,
            altura: 8,
            esTriangulo: true
          },
          { 
            texto: "Carlos construye una mesa rectangular de 2 metros de base y 1.2 metros de altura. 쮺u치l es el 치rea de la mesa?",
            base: 2,
            altura: 1.2,
            esTriangulo: false
          },
          { 
            texto: "Una bandera triangular tiene una base de 12 metros y una altura de 9 metros. 쮺u치l es su 치rea? (츼rea = Base 칑 Altura 칭 2)",
            base: 12,
            altura: 9,
            esTriangulo: true
          }
        ]
      };

      // Seleccionar ejercicios aleatorios
      const ex1 = ejerciciosPool.ejercicio1[Math.floor(Math.random() * ejerciciosPool.ejercicio1.length)];
      const ex2 = ejerciciosPool.ejercicio2[Math.floor(Math.random() * ejerciciosPool.ejercicio2.length)];
      const ex3 = ejerciciosPool.ejercicio3[Math.floor(Math.random() * ejerciciosPool.ejercicio3.length)];

      // Calcular 치reas correctas
      ex2.area = ex2.base * ex2.altura;
      ex3.area = ex3.esTriangulo ? (ex3.base * ex3.altura) / 2 : ex3.base * ex3.altura;

      // Actualizar DOM cuando est칠 listo
      document.addEventListener('DOMContentLoaded', function() {
        // Ejercicio 1
        const ex1BaseEl = document.getElementById('ex1-base-value');
        const ex1AlturaEl = document.getElementById('ex1-altura-value');
        if (ex1BaseEl) ex1BaseEl.textContent = ex1.base;
        if (ex1AlturaEl) ex1AlturaEl.textContent = ex1.altura;

        // Ejercicio 2
        const ex2BaseEl = document.getElementById('ex2-base-value');
        const ex2AlturaEl = document.getElementById('ex2-altura-value');
        if (ex2BaseEl) ex2BaseEl.textContent = ex2.base;
        if (ex2AlturaEl) ex2AlturaEl.textContent = ex2.altura;

        // Ejercicio 3
        const ex3TextEl = document.getElementById('ex3-problem-text');
        if (ex3TextEl) ex3TextEl.textContent = ex3.texto;

        console.log('Ejercicios cargados:', { ex1, ex2, ex3 });
      });

      // === MODO OSCURO ===
      const darkModeToggle = document.getElementById("darkModeToggle");
      const htmlElement = document.documentElement;

      const darkMode = localStorage.getItem("darkMode");
      if (darkMode === "enabled") {
        htmlElement.classList.add("dark");
      }

      darkModeToggle.addEventListener("click", () => {
        htmlElement.classList.toggle("dark");
        const isDarkMode = htmlElement.classList.contains("dark");
        localStorage.setItem("darkMode", isDarkMode ? "enabled" : "disabled");
      });
    </script>
  </body>
</html>
